<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Arya Mohan - Portfolio 2025</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.min.js"></script>
</head>
<div id="morphOverlay" class="morph-overlay"></div>
<!-- Contact popup -->
<div
  class="contact-popup"
  id="contactPopup"
  aria-hidden="true"
>
  <div
    class="contact-popup-inner"
    role="dialog"
    aria-modal="true"
    aria-labelledby="contactPopupTitle"
  >
    <div class="contact-popup-header">
      <h2 id="contactPopupTitle">Get in touch</h2>
      <button
        class="contact-popup-close"
        type="button"
        data-close-contact
        aria-label="Close contact options"
      >
        ‚úï
      </button>
    </div>

    <div class="contact-popup-body">
      <p class="contact-popup-sub">Choose how you‚Äôd like to reach me:</p>
      <div class="contact-list">
        <!-- Phone -->
        <a class="contact-item" href="tel:+918197777861">
          <span class="contact-icon">üìû</span>
          <span class="contact-text">
            <span class="contact-label">Call</span>
            <span class="contact-detail">+91 81977 77861</span>
          </span>
        </a>

        <!-- Email -->
        <a class="contact-item" href="mailto:arumohan2004@gmail.com">
          <span class="contact-icon">‚úâÔ∏è</span>
          <span class="contact-text">
            <span class="contact-label">Email</span>
            <span class="contact-detail">arumohan2004@gmail.com</span>
          </span>
        </a>

        <!-- Behance -->
        <a class="contact-item" href="https://www.behance.net/aryamohan4" target="_blank" rel="noopener">
          <span class="contact-icon">üÖ±Ô∏è</span>
          <span class="contact-text">
            <span class="contact-label">Behance</span>
            <span class="contact-detail">View my projects</span>
          </span>
        </a>

        <!-- LinkedIn -->
        <a class="contact-item" href="https://www.linkedin.com/in/arya-mohan-60b3a7243/" target="_blank" rel="noopener">
          <span class="contact-icon">in</span>
          <span class="contact-text">
            <span class="contact-label">LinkedIn</span>
            <span class="contact-detail">Connect professionally</span>
          </span>
        </a>
      </div>
    </div>
  </div>
</div>

<body data-page="home">
  <!-- top header overlay -->
  <header class="topbar" role="banner" aria-label="Top header">
    <div class="topbar-inner">
      <a href="index.html" class="brand" style="text-decoration:none; color:inherit;">
        <img
          src="images/logo-dark.png"
          class="brand-logo"
          data-dark-src="images/logo-dark.png"
          data-light-src="images/logo-light.png"
          onerror="this.style.display='none'"
        >
        <div class="brand-text">
          <div class="brand-name">Arya Mohan</div>
          <div class="brand-sub">Experience & Interaction Designer</div>
        </div>
      </a>

      <div class="topbar-actions">

        <!-- CV / RESUME BUTTON -->
        <a class="btn cv-btn" href="resume.pdf" target="_blank" rel="noopener" aria-label="Download CV or open resume">
          <!-- Inline SVG Document Icon -->
          <svg class="cv-icon" viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
            <g fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14 3H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <path d="M14 3v5h5"></path>
              <path d="M8 13h8M8 17h8" stroke-opacity="0.9"></path>
            </g>
          </svg>

          <!-- Text (shown on desktop, hidden on mobile) -->
          <span class="cv-label">CV / Resume</span>
        </a>


        <!-- THEME TOGGLER -->
        <button id="themeToggle" class="svg-theme-btn" aria-label="Toggle theme" title="Toggle theme">
          <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" focusable="false" role="img">
            <path class="icon-moon" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="currentColor"/>
            <g class="icon-sun" fill="currentColor">
              <path d="M12 4V2M12 22v-2M4.22 4.22L2.81 2.81M21.19 21.19l-1.41-1.41M1 12H3M21 12h2M4.22 19.78l-1.41 1.41M21.19 2.81l-1.41 1.41" 
                    stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="12" r="3"/>
            </g>
          </svg>
        </button>

      </div>
    </div>
  </header>

  <!-- canvas container (sketch attaches its canvas here) -->
  <div id="container"></div>

  <!-- single capsule nav (Work is a link to the work page) -->
  <div class="capsule" id="nav" role="navigation" aria-label="Site navigation">
    <a class="nav-btn" href="work.html" data-key="work" data-img="images/work5.jpg" aria-label="Work">Work</a>
    <a class="nav-btn" href="about.html" data-key="about" data-img="images/about.jpg" aria-label="About">About</a>
    <button
      id="contactNavBtn"
      class="nav-btn"
      data-key="contact"
      data-img="images/contact.jpg"
      aria-haspopup="dialog"
      aria-expanded="false"
    >
      Contact
    </button>

  </div>

  <script src="sketch.js"></script>

  <script>
  /* Theme + UI initializer for Home (works with sketch.js when present) */
  (function() {
    const btn = document.getElementById('themeToggle');
    const body = document.body;
    const logo = document.querySelector('.brand-logo');

    function safeCall(fnName, ...args){
      try { if (typeof window[fnName] === 'function') window[fnName](...args); }
      catch(e){ /* ignore */ }
    }

    function setButtonState(isLight) {
      btn.setAttribute('aria-pressed', isLight ? 'true' : 'false');
      btn.setAttribute('aria-label', isLight ? 'Switch to dark mode' : 'Switch to light mode');
      if (isLight) btn.classList.add('is-light'); else btn.classList.remove('is-light');
    }

    // NEW: helper to switch logo based on theme
    function updateLogo(isLight) {
      if (!logo) return;
      const lightSrc = logo.getAttribute('data-light-src');
      const darkSrc  = logo.getAttribute('data-dark-src');
      if (isLight && lightSrc) {
        logo.src = lightSrc;
      } else if (!isLight && darkSrc) {
        logo.src = darkSrc;
      }
    }

    const saved = localStorage.getItem('site-theme');
    const isLightInit = saved === 'light';
    if (isLightInit) body.classList.add('light'); else body.classList.remove('light');
    setButtonState(isLightInit);
    updateLogo(isLightInit);
    // Inform sketch (if loaded)
    safeCall('updateSketchTheme', isLightInit ? 'light' : 'dark');

    btn.addEventListener('click', () => {
      const nowLight = body.classList.toggle('light');
      setButtonState(nowLight);
      localStorage.setItem('site-theme', nowLight ? 'light' : 'dark');
      updateLogo(nowLight);
      safeCall('updateSketchTheme', nowLight ? 'light' : 'dark');
    });

    btn.addEventListener('keydown', (ev) => {
      if (ev.key === ' ' || ev.key === 'Enter') { ev.preventDefault(); btn.click(); }
    });

    window.toggleSiteTheme = () => { btn.click(); };

    // Align topbar to canvas area when p5 signals readiness
    function alignTopbarToCanvas() {
      try {
        const canv = document.querySelector('#container canvas');
        const topbar = document.querySelector('.topbar');
        if (!canv || !topbar) return;
        const rect = canv.getBoundingClientRect();
        topbar.style.width = rect.width + 'px';
        topbar.style.left = rect.left + window.scrollX + 'px';
        topbar.style.transform = 'none';
      } catch(e){ /* silent */ }
    }

    // p5 will call window.onP5Ready() when it has mounted; sketch.js should call that.
    window.onP5Ready = function(){ alignTopbarToCanvas(); safeCall('updateSketchTheme', document.body.classList.contains('light') ? 'light' : 'dark'); };

    window.addEventListener('resize', alignTopbarToCanvas);
    window.addEventListener('scroll', alignTopbarToCanvas);

    // defensive: ensure only one capsule exists (keeps things tidy)
    (function prune(){
      function run(){ const all = Array.from(document.querySelectorAll('.capsule')); if (all.length>1) all.slice(1).forEach(n => n.remove()); }
      document.addEventListener('DOMContentLoaded', run);
      const mo = new MutationObserver(run); mo.observe(document.body, { childList:true, subtree:true });
    })();

  })();
  </script>

  <!-- Align any .site-inner (if present) to topbar on load/resize so work page can reuse same logic -->
  <script>
  (function(){
    function syncInnerToTopbar(){
      const topbar = document.querySelector('.topbar');
      const inners = document.querySelectorAll('.site-inner');
      if (!topbar || !inners.length) return;
      const rect = topbar.getBoundingClientRect();
      inners.forEach(inner => {
        inner.style.width = rect.width + 'px';
        inner.style.position = 'absolute';
        inner.style.left = rect.left + 'px';
        inner.style.top = (rect.top + rect.height + 8) + 'px';
      });
    }
    window.addEventListener('resize', syncInnerToTopbar);
    window.addEventListener('load', () => { setTimeout(syncInnerToTopbar,30); setTimeout(syncInnerToTopbar,250); });
    new MutationObserver(()=> setTimeout(syncInnerToTopbar,20)).observe(document.body, { childList:true, subtree:true });
  })();
  </script>

  <script>
  (function () {
    const contactBtn = document.getElementById('contactNavBtn');
    const popup = document.getElementById('contactPopup');
    if (!contactBtn || !popup) return;

    const closeBtn = popup.querySelector('[data-close-contact]');
    const focusableSelector = 'a[href], button:not([disabled])';
    let lastFocusedElement = null;

    function openContactPopup() {
      lastFocusedElement = document.activeElement;

      popup.classList.add('is-open');
      document.body.classList.add('contact-open');
      popup.setAttribute('aria-hidden', 'false');
      contactBtn.setAttribute('aria-expanded', 'true');

      // focus first actionable item
      const firstFocusable = popup.querySelector(focusableSelector);
      if (firstFocusable) firstFocusable.focus();
    }

    function closeContactPopup() {
      popup.classList.remove('is-open');
      document.body.classList.remove('contact-open');
      popup.setAttribute('aria-hidden', 'true');
      contactBtn.setAttribute('aria-expanded', 'false');

      if (lastFocusedElement && typeof lastFocusedElement.focus === 'function') {
        lastFocusedElement.focus();
      }
    }

    // open on click
    contactBtn.addEventListener('click', function () {
      const isOpen = popup.classList.contains('is-open');
      if (isOpen) {
        closeContactPopup();
      } else {
        openContactPopup();
      }
    });

    // open on keyboard (Enter/Space is already handled by button semantics,
    // but we can ensure consistent behavior)
    contactBtn.addEventListener('keydown', function (e) {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        contactBtn.click();
      }
    });

    // close button
    if (closeBtn) {
      closeBtn.addEventListener('click', function () {
        closeContactPopup();
      });
    }

    // click on backdrop to close
    popup.addEventListener('click', function (e) {
      if (e.target === popup) {
        closeContactPopup();
      }
    });

    // ESC to close
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape' && popup.classList.contains('is-open')) {
        e.preventDefault();
        closeContactPopup();
      }
    });
  })();
  </script>

</body>
</html>
